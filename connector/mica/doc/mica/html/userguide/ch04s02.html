<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Agent Transport</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><link rel="home" href="index.html" title="Mica: Users Guide"><link rel="up" href="ch04.html" title="Chapter 4. Agents"><link rel="prev" href="ch04.html" title="Chapter 4. Agents"><link rel="next" href="ch05.html" title="Chapter 5. Blackboards"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Agent Transport</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch04.html">Prev</a> </td><th width="60%" align="center">Chapter 4. Agents</th><td width="20%" align="right"> <a accesskey="n" href="ch05.html">Next</a></td></tr></table><hr></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="agenttransport"></a>Agent Transport</h2></div></div></div><p>An agent's transport is its connection to the blackboard. As such
			the transport provides all of the actions that an agent can initiate
			with the blackboard. The function provided by the agent transport are
			described in the following sections.</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="agenttransport.connect"></a><code class="code">connect(String)</code></h3></div></div></div><p>This method attempts to connect to the blackboard using the
				given string as the agent's name. If successful the method will return
				the actual name used to identify the agent.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="agenttransport.disconnect"></a><code class="code">disconnect()</code></h3></div></div></div><p>Disconnects the agent from the blackboard.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="agenttransport.register"></a><code class="code">register(String)</code></h3></div></div></div><p>Tells the blackboard that the agent is interested in all
				mobs of the given type.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="agenttransport.unregister"></a><code class="code">unregister(String)</code></h3></div></div></div><p>Tells the blackboard the agent is no longer interested in
				the given type.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="agenttransport.gettypemanager"></a><code class="code">getTypeManager()</code></h3></div></div></div><p>Requests a type manager that knows the current type hierarchy.
				</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="agenttransport.writemob"></a><code class="code">writeMob(Mob)</code></h3></div></div></div><p>Writes the given mob to the blackboard.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="agenttransport.readmob"></a><code class="code">readMob(String)</code></h3></div></div></div><p>Reads the named mob off of the blackboard.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="agenttransport.deletemob"></a><code class="code">deleteMob(String)</code></h3></div></div></div><p>Deletes the named mob from the blackboard.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="agenttransport.replacemob"></a><code class="code">replaceMob(Mob)</code></h3></div></div></div><p>Overwrites the mob with the new values.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="agenttransport.mobsearch"></a><code class="code">mobSearch(String)</code></h3></div></div></div><p>This method is used to search the blackboard for all stored
				mobs that fit a given condition. The parser for the search string
				is dependant on the actual blackboard being used.</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="searchlanguage"></a>Search Query Language</h4></div></div></div><p>The default implementation in the Mica distribution
					includes a blackboard with an SQL back end. Searching this
					blackboard is done using standard SQL statements with some
					functional additions applicable to mobs. These functions
					can be used to restrict the output from the search or
					to order the returned mobs.</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="sqlfunctions"></a>SQL Mob Functions</h5></div></div></div><p></p><div class="variablelist"><dl><dt><span class="term"><code class="code">typeof(mob, 'type')</code></span></dt><dd><p>allows you to check the type of a mob. This
								method returns a boolean.</p></dd><dt><span class="term"><code class="code">hasslot(mob, 'slotName')</code></span></dt><dd><p>allows you to check whether a mob has a
								particular slot or not.</p></dd><dt><span class="term"><code class="code">getslot1(mob, 'slotName')</code></span></dt><dd><p>gets the first value of a slot. It returns a
								string.</p></dd><dt><span class="term"><code class="code">getslot1asdbl(mob, 'slotName')</code></span></dt><dd><p>gets the first value of a slot. It returns a
								double.</p></dd><dt><span class="term"><code class="code">getslot1asint(mob, 'slotName')</code></span></dt><dd><p>gets the first value of a slot. It returns an
								int.</p></dd><dt><span class="term"><code class="code">getslotn(mob, 'slotName', pos)</code></span></dt><dd><p>is a useful method for getting arbitrary
								information from a multi-valued slot.</p></dd><dt><span class="term"><code class="code">contains(mob, 'slotName', 'value')</code></span></dt><dd><p>allows you to check whether a mob has a
								particular value stored somewhere in a multi-valued
								slot.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="sqlexamples"></a>SQL Examples</h5></div></div></div><p>Here are some example queries to help you on your way.</p><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="sql.all"></a>Getting all mobs on the blackboard</h6></div></div></div><p>To get all of the mobs currently on the blackboard you
							can use:</p><div class="blockquote"><blockquote class="blockquote"><pre class="programlisting">select * from mobs</pre></blockquote></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="sql.type"></a>Getting all mobs of a particular type</h6></div></div></div><p>To find all mobs of a particular type you could try:
							</p><div class="blockquote"><blockquote class="blockquote"><pre class="programlisting">select * from mobs where typeof(mob, 'text')</pre></blockquote></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="sql.order"></a>Ordering mobs</h6></div></div></div><p>To order the mobs you can try the <code class="code">order by</code>
							command. This will look like:</p><div class="blockquote"><blockquote class="blockquote"><pre class="programlisting">select * from mobs where typeof(mob, 'text')
    order by getslot1(mob, 'creationTime')</pre></blockquote></div><p>Appending <code class="code">asc</code> or <code class="code">desc</code> will
							place the mobs in ascending and descending order respectively.
							</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="sql.top"></a>Getting the first of a list of mobs</h6></div></div></div><p>To get the most recent mob you could try:</p><div class="blockquote"><blockquote class="blockquote"><pre class="programlisting">select top 1 * from mobs
    order by getslot1(mob, 'creationTime') desc</pre></blockquote></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="sql.creator"></a>Finding mobs with particular properties</h6></div></div></div><p>To find a mob you have written you could use:</p><div class="blockquote"><blockquote class="blockquote"><pre class="programlisting">select * from mobs
    where contains(mob, 'creator', 'myAgentName')</pre></blockquote></div><p>As long as only one value is in the creator slot this
							could also be done by:</p><div class="blockquote"><blockquote class="blockquote"><pre class="programlisting">select * from mobs
    where getslot1(mob, 'creator') = 'myAgentName'</pre></blockquote></div></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="agenttransport.isconnected"></a><code class="code">isConnected()</code></h3></div></div></div><p>Checks that the transport is connected to the blackboard.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="agenttransport.getagentname"></a><code class="code">getAgentName()</code></h3></div></div></div><p>Asks the transport for the name the agent is currently connected
				to the blackboard with.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="agenttransport.setmessagehandler"></a><code class="code">setMessageHandler(MessageHandler)</code></h3></div></div></div><p>This method is used to tell the transport who is to respond
				to the messages coming from the blackboard. Typically an agent
				transport's message handler is the agent and is set when the transport
				is created. So this method is often not required.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="agenttransport.synchronizedwritemob"></a><code class="code">synchronizedWriteMob(Mob, long)</code></h3></div></div></div><p>An extension of the agent transport is a synchronized transport
				<sup>[<a name="idp3451000" href="#ftn.idp3451000" class="footnote">3</a>]</sup>. This transport allow mobs to be used to perform
				remote proceedure calls(RPC) over Mica.</p><p>This method writes the given mob to the blackboard and waits for
				a mob to be sent in reply. A reply mob is any mob that the agent is
				registered for that names the original mob in its 'replyTo' slot.</p><p>The method returns an object containing the name of the
				written mob and the received reply. If no reply mob is received in
				the given time period then the returned object will have no reply.
				</p></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a name="ftn.idp3451000" href="#idp3451000" class="para">3</a>] </sup>The implementation is <code class="code">unsw.cse.mica.sync.SynchronizedTransport</code>
				which is used by wrapping it around a standard agent transport.
				</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch04.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch04.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch05.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 4. Agents </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 5. Blackboards</td></tr></table></div></body></html>
